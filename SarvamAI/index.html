<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sarvam AI Hub -- Smart Multimodal Content & Code</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.tailwindcss.com"></script>
<style>
:root {
  --bg-gradient: linear-gradient(135deg, #f3e8ff, #d8a7ff); 
  --card-bg: #ffffffcc;
  --text: #222;
  --text-secondary: #666;
  --input-bg: #ffffffb0;
  --tab-bg: #f3f3f3cc;
  --header-bg: rgba(255, 255, 255, 0.85);
  --btn-bg: linear-gradient(45deg, #8338ec, #9d4edd); 
  --btn-hover: linear-gradient(45deg, #702ecc, #8e42d7);
  --tab-active-standard: #9d4edd;
  --tab-active-canva: #1dd1a1;
  --tab-active-deepthink: #7aa1ff;
  --tab-active-deepresearch: #f368e0;
  --canva-type-bg: #e0f2f1;
  --canva-type-active: #0d9488;
  --shadow-base: rgba(0,0,0,0.1);
  --shadow-card: 0 10px 20px rgba(0,0,0,0.1);
  --focus-ring-color: #9d4edd;
  --input-focus-glow: 0 0 0 3px rgba(157, 77, 221, 0.5);
}

[data-theme="dark"] {
  --bg-gradient: linear-gradient(135deg, #1a082b, #3f1163);
  --card-bg: #352a46cc;
  --text: #f0f4f8;
  --text-secondary: #aeb8c4;
  --input-bg: #1f283d;
  --tab-bg: #3f516acc;
  --header-bg: rgba(26, 8, 43, 0.9);
  --btn-bg: linear-gradient(45deg, #b366ff, #9d4edd);
  --btn-hover: linear-gradient(45deg, #c790ff, #a453e0);
  --tab-active-standard: #b366ff;
  --focus-ring-color: #b366ff;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; transition: color 0.3s, background-color 0.3s, box-shadow 0.3s; }
body { background: var(--bg-gradient); color: var(--text); padding: 15px; min-height: 100vh; }

header { position: sticky; top: 0; z-index: 100; max-width: 1000px; margin: 0 auto 15px; padding: 10px 20px; background: var(--header-bg); backdrop-filter: blur(10px); border-radius: 15px; display: flex; justify-content: flex-end; }
#theme-toggle { padding: 8px 16px; border-radius: 50px; background: var(--text-secondary); color: white; cursor: pointer; border:none; font-weight: 600; }

.container { max-width: 1000px; margin: auto; }
h1 { text-align: center; font-size: 2.5rem; margin-bottom: 20px; background: linear-gradient(45deg, var(--tab-active-standard), var(--tab-active-canva)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700; }

.input-card { background: var(--card-bg); padding: 20px; border-radius: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); box-shadow: var(--shadow-card); border: 1px solid rgba(255,255,255,0.1); }

input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: var(--input-bg); color: var(--text); outline: none; }
input:focus { border-color: var(--focus-ring-color); box-shadow: var(--input-focus-glow); }

#generateButton { width: 100%; padding: 16px; font-size: 1.2rem; font-weight: 700; border-radius: 50px; background: var(--btn-bg); color: white; border: none; cursor: pointer; box-shadow: 0 4px 0px #6b21a8; transform: translateY(0); }
#generateButton:active { transform: translateY(2px); box-shadow: 0 2px 0px #6b21a8; }
#generateButton:disabled { opacity: 0.5; cursor: not-allowed; }

.mode-tab { display: inline-block; padding: 8px 18px; margin: 5px 5px 8px 0; border-radius: 30px; cursor: pointer; background: var(--tab-bg); font-weight: 600; }
.mode-tab.active.standard { background: var(--tab-active-standard); color: white; }
.mode-tab.active.canva { background: var(--tab-active-canva); color: white; }
.mode-tab.active.deepthink { background: var(--tab-active-deepthink); color: white; }
.mode-tab.active.deepresearch { background: var(--tab-active-deepresearch); color: white; }

#editor { width: 100%; height: 300px; background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 12px; overflow: auto; font-family: monospace; white-space: pre; margin-top: 10px; border: 1px solid #333; }
#response { background: var(--card-bg); padding: 20px; border-radius: 15px; min-height: 50px; white-space: pre-wrap; font-family: monospace; font-size: 0.9rem; border: 1px solid rgba(0,0,0,0.05); }

.loader { border: 3px solid #f3f3f3; border-top: 3px solid var(--tab-active-standard); border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; display: inline-block; vertical-align: middle; margin-right: 10px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.canva-type-btn { padding: 6px 12px; border-radius: 20px; background: var(--canva-type-bg); margin-right: 5px; cursor: pointer; border: 1px solid transparent; }
.canva-type-btn.active-type { background: var(--canva-type-active); color: white; }

.lang-buttons { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 8px; margin-top: 10px; }
.lang-btn { padding: 6px; border-radius: 8px; border: 1px solid #ddd; background: white; cursor: pointer; font-size: 0.8rem; }
.lang-btn.active-lang { background: var(--tab-active-canva); color: white; border-color: var(--tab-active-canva); }
</style>
</head>
<body data-theme="light">

<header>
    <button id="theme-toggle"><i class="fas fa-moon"></i> Dark Mode</button>
</header>

<div class="container">
    <h1><i class="fas fa-microchip"></i> Sarvam AI Hub</h1>

    <div class="input-card">
        <label class="block font-semibold">Sarvam Subscription Key:</label>
        <input type="password" id="apiKey" placeholder="Enter api-subscription-key">

        <label class="block mt-4 font-semibold">Sarvam Model:</label>
        <select id="modelSelect">
            <option value="sarvam-m" selected>Sarvam-M (Optimized for India)</option>
            <option value="sarvam-2b">Sarvam 2B</option>
        </select>

        <div class="mt-4 flex flex-wrap">
            <div class="mode-tab active standard" data-mode="standard">Standard</div>
            <div class="mode-tab" data-mode="canva">Canva Studio</div>
            <div class="mode-tab" data-mode="deepthink">DeepThink</div>
            <div class="mode-tab" data-mode="deepresearch">DeepResearch</div>
        </div>

        <label class="block mt-4 font-semibold">Prompt:</label>
        <textarea id="userPrompt" rows="4" placeholder="Ask in Hindi, Tamil, English..."></textarea>

        <button id="generateButton"><i class="fas fa-rocket"></i> Generate Content</button>
    </div>

    <div id="canva-container" class="input-card" style="display:none;">
        <div class="flex gap-2 mb-4">
            <div class="canva-type-btn active-type" data-type="document">Document</div>
            <div class="canva-type-btn" data-type="code">Code</div>
        </div>
        
        <div class="lang-buttons" id="lang-buttons" style="display:none;">
            <button class="lang-btn active-lang" data-lang="html">HTML</button>
            <button class="lang-btn" data-lang="python">Python</button>
            <button class="lang-btn" data-lang="javascript">JS</button>
        </div>

        <div id="editor" contenteditable="true"></div>
    </div>

    <div class="input-card">
        <h2 class="font-bold mb-2">Output</h2>
        <div id="response">Waiting for prompt...</div>
    </div>
</div>

<script>
let selectedMode = 'standard';
let selectedType = 'document';
let selectedLang = 'html';

// Correct API Configuration for Sarvam
const SARVAM_URL = "https://api.sarvam.ai/v1/chat/completions";

// Handle UI Switching
document.querySelectorAll('.mode-tab').forEach(tab => {
    tab.addEventListener('click', () => {
        document.querySelectorAll('.mode-tab').forEach(t => t.classList.remove('active', 'standard', 'canva', 'deepthink', 'deepresearch'));
        selectedMode = tab.dataset.mode;
        tab.classList.add('active', selectedMode);
        document.getElementById('canva-container').style.display = selectedMode === 'canva' ? 'block' : 'none';
    });
});

document.querySelectorAll('.canva-type-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.canva-type-btn').forEach(b => b.classList.remove('active-type'));
        btn.classList.add('active-type');
        selectedType = btn.dataset.type;
        document.getElementById('lang-buttons').style.display = selectedType === 'code' ? 'grid' : 'none';
    });
});

document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active-lang'));
        btn.classList.add('active-lang');
        selectedLang = btn.dataset.lang;
    });
});

async function generate() {
    const key = document.getElementById('apiKey').value.trim();
    const prompt = document.getElementById('userPrompt').value.trim();
    const model = document.getElementById('modelSelect').value;
    const btn = document.getElementById('generateButton');
    const respDiv = document.getElementById('response');
    const editor = document.getElementById('editor');

    if (!key || !prompt) return alert("API Key and Prompt are required.");

    btn.disabled = true;
    respDiv.innerHTML = '<div class="loader"></div> Processing...';

    // Build the system instructions based on mode
    let systemMsg = "You are a helpful assistant specialized in Indian context.";
    if (selectedMode === 'canva') {
        systemMsg = selectedType === 'code' 
            ? `Output ONLY raw ${selectedLang} code. No explanations.` 
            : "Output ONLY markdown text for a document.";
    } else if (selectedMode === 'deepthink') {
        systemMsg = "Provide a deep, step-by-step reasoning for the following query.";
    }

    try {
        const response = await fetch(SARVAM_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'api-subscription-key': key
            },
            body: JSON.stringify({
                model: model,
                messages: [
                    { role: "system", content: systemMsg },
                    { role: "user", content: prompt }
                ],
                temperature: 0.7
            })
        });

        const data = await response.json();
        
        if (data.error) throw new Error(data.error.message || "API Error");

        const content = data.choices[0].message.content;

        if (selectedMode === 'canva') {
            editor.textContent = content;
            respDiv.innerText = "Content moved to editor.";
        } else {
            respDiv.innerText = content;
        }

    } catch (err) {
        respDiv.innerText = "Error: " + err.message;
    } finally {
        btn.disabled = false;
    }
}

document.getElementById('generateButton').addEventListener('click', generate);

// Theme Toggle
document.getElementById('theme-toggle').addEventListener('click', () => {
    const isDark = document.body.getAttribute('data-theme') === 'dark';
    document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
    document.getElementById('theme-toggle').innerHTML = isDark ? '<i class="fas fa-moon"></i> Dark Mode' : '<i class="fas fa-sun"></i> Light Mode';
});
</script>
</body>
</html>

