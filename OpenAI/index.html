<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OpenAI Multi-Model Interface</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #10a37f 0%, #1a7f64 100%);
    min-height: 100vh;
    padding: 20px;
}
.container {
    max-width: 1400px;
    margin: 0 auto;
    background: white;
    border-radius: 20px;
    box-shadow: 0 25px 70px rgba(0,0,0,0.3);
    overflow: hidden;
}
.header {
    background: linear-gradient(135deg, #10a37f 0%, #1a7f64 100%);
    color: white;
    padding: 40px;
    text-align: center;
}
.header h1 { font-size:36px; margin-bottom:12px; font-weight:700; }
.header p { opacity:0.95; font-size:15px; }
.controls {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
    padding:30px;
    background:#f7f7f8;
    border-bottom:2px solid #e5e5e5;
}
.control-group { display:flex; flex-direction:column; gap:10px; }
.control-group label { font-weight:600; color:#1a1a1a; font-size:13px; text-transform:uppercase; letter-spacing:0.5px; }
select, input {
    padding:14px;
    border:2px solid #e5e5e5;
    border-radius:10px;
    font-size:14px;
    transition: all 0.3s;
    background:white;
    font-family:inherit;
}
select:focus, input:focus { outline:none; border-color:#10a37f; box-shadow:0 0 0 3px rgba(16,163,127,0.1); }
.chat-container {
    height:550px;
    overflow-y:auto;
    padding:30px;
    background:#ffffff;
    scroll-behavior:smooth;
}
.message { margin-bottom:24px; display:flex; gap:14px; animation:slideIn 0.4s ease-out; }
@keyframes slideIn { from{opacity:0; transform:translateY(15px);} to{opacity:1; transform:translateY(0);} }
.message.user { flex-direction:row-reverse; }
.message-avatar {
    width:42px; height:42px; border-radius:50%; display:flex; align-items:center; justify-content:center;
    font-weight:bold; color:white; flex-shrink:0; font-size:18px;
}
.user .message-avatar { background: linear-gradient(135deg,#10a37f 0%,#1a7f64 100%); }
.assistant .message-avatar { background: linear-gradient(135deg,#ff6b6b 0%,#ee5a6f 100%); }
.message-content { max-width:75%; padding:16px 22px; border-radius:14px; line-height:1.6; font-size:15px; }
.user .message-content { background: linear-gradient(135deg,#10a37f 0%,#1a7f64 100%); color:white; border-bottom-right-radius:4px; }
.assistant .message-content { background:#f7f7f8; color:#1a1a1a; border:1px solid #e5e5e5; border-bottom-left-radius:4px; }
.model-badge { display:inline-block; padding:5px 12px; background: rgba(16,163,127,0.12); color:#10a37f; border-radius:16px; font-size:11px; font-weight:700; margin-bottom:10px; text-transform:uppercase; letter-spacing:0.5px; }
.input-container { padding:24px 30px; background:#f7f7f8; border-top:2px solid #e5e5e5; display:flex; gap:14px; align-items:flex-end; }
.input-container textarea { flex:1; padding:14px; border:2px solid #e5e5e5; border-radius:12px; font-size:15px; font-family:inherit; resize:none; min-height:60px; max-height:150px; }
.input-container textarea:focus { outline:none; border-color:#10a37f; box-shadow:0 0 0 3px rgba(16,163,127,0.1); }
.input-container button { padding:14px 32px; background:linear-gradient(135deg,#10a37f 0%,#1a7f64 100%); color:white; border:none; border-radius:12px; font-weight:700; cursor:pointer; transition: all 0.3s; font-size:15px; text-transform:uppercase; letter-spacing:0.5px; }
.input-container button:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 8px 20px rgba(16,163,127,0.3); }
.input-container button:disabled { opacity:0.5; cursor:not-allowed; }
.media-output { margin-top:16px; border-radius:12px; overflow:hidden; max-width:100%; }
.media-output img { max-width:100%; display:block; border-radius:8px; }
.media-output audio { width:100%; margin-top:10px; }
@media(max-width:768px){ .controls{grid-template-columns:1fr;} .message-content{max-width:90%;} .header h1{font-size:28px;} }
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ü§ñ OpenAI Multi-Model Interface</h1>
        <p>Access GPT, O-Series, Image, Audio, and Video models with advanced modes</p>
    </div>

    <div class="controls">
        <div class="control-group">
            <label for="model-select">üéØ Select Model</label>
            <select id="model-select">
                <option value="gpt-4.1-mini" selected>GPT-4.1 Mini</option>
                <option value="gpt-4o-mini">GPT-4o Mini</option>
                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                <option value="dall-e-3">DALL¬∑E 3</option>
                <option value="tts-1">TTS-1</option>
            </select>
        </div>

        <div class="control-group">
            <label for="mode-select">‚öôÔ∏è Interaction Mode</label>
            <select id="mode-select">
                <option value="normal" selected>Normal Chat</option>
                <option value="deepthink">Deep Think</option>
                <option value="deep-research">Deep Research</option>
            </select>
            <div class="mode-description" id="mode-description">Standard conversational mode with real-time responses</div>
        </div>
    </div>

    <div class="chat-container" id="chat-container">
        <div class="message assistant">
            <div class="message-avatar">AI</div>
            <div class="message-content">
                <div class="model-badge">GPT-4.1 Mini - Normal Mode</div>
                Welcome! Select a model and mode above, then type your message below.
            </div>
        </div>
    </div>

    <div class="input-container">
        <textarea id="user-input" placeholder="Type your message here..."></textarea>
        <button id="send-btn" onclick="sendMessage()">Send</button>
    </div>
</div>

<script>
const BACKEND_URL = '/api/ask'; // Node.js backend endpoint
let conversationHistory = [];

const modeDescriptions = {
    normal: 'Standard conversational mode with real-time responses',
    deepthink: 'Extended reasoning with step-by-step explanation',
    'deep-research': 'In-depth multi-perspective research and analysis'
};

document.getElementById('mode-select').addEventListener('change', function() {
    document.getElementById('mode-description').textContent = modeDescriptions[this.value];
});

document.getElementById('user-input').addEventListener('keydown', function(e){
    if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); sendMessage(); }
});

function getModelType(model){
    if(model.includes('dall-e')) return 'image';
    if(model.includes('tts')) return 'tts';
    return 'chat';
}

function addMessage(role, content, model, mode, mediaUrl=null){
    const chatContainer = document.getElementById('chat-container');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${role}`;
    const avatar = document.createElement('div');
    avatar.className = 'message-avatar';
    avatar.textContent = role==='user'?'U':'AI';
    const messageContent = document.createElement('div');
    messageContent.className='message-content';
    if(role==='assistant'){
        const badge = document.createElement('div');
        badge.className='model-badge';
        badge.textContent = `${model} - ${mode}`;
        messageContent.appendChild(badge);
    }
    const text = document.createElement('div');
    text.textContent = content;
    messageContent.appendChild(text);

    if(mediaUrl){
        const mediaDiv = document.createElement('div');
        mediaDiv.className='media-output';
        if(mediaUrl.endsWith('.mp3') || mediaUrl.endsWith('.wav')){
            const audio=document.createElement('audio');
            audio.controls=true;
            audio.src=mediaUrl;
            mediaDiv.appendChild(audio);
        } else {
            const img=document.createElement('img');
            img.src=mediaUrl;
            mediaDiv.appendChild(img);
        }
        messageContent.appendChild(mediaDiv);
    }

    messageDiv.appendChild(avatar);
    messageDiv.appendChild(messageContent);
    chatContainer.appendChild(messageDiv);
    chatContainer.scrollTop=chatContainer.scrollHeight;
}

async function sendMessage(){
    const input = document.getElementById('user-input');
    const userText = input.value.trim();
    if(!userText) return;
    input.value = '';
    const model = document.getElementById('model-select').value;
    const mode = document.getElementById('mode-select').value;
    addMessage('user', userText, model, mode);

    const type = getModelType(model);

    let body = { type, model };
    if(type==='chat'){
        let messages = [...conversationHistory, { role: 'user', content: userText }];
        if(mode==='deepthink'){
            messages.unshift({ role:'system', content:'Provide step-by-step reasoning.' });
        } else if(mode==='deep-research'){
            messages.unshift({ role:'system', content:'Provide multi-perspective in-depth analysis.' });
        }
        body.messages = messages;
    } else {
        body.prompt = userText;
    }

    try{
        const response = await fetch(BACKEND_URL, {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify(body)
        });
        const data = await response.json();
        if(type==='chat'){
            const reply = data.choices?.[0]?.message?.content || 'No response';
            conversationHistory.push({ role:'user', content:userText });
            conversationHistory.push({ role:'assistant', content:reply });
            addMessage('assistant', reply, model, mode);
        } else if(type==='image'){
            const url = data.data?.[0]?.url || null;
            if(url) addMessage('assistant','Here is your generated image:', model, mode, url);
            else addMessage('assistant','Image generation failed.', model, mode);
        } else if(type==='tts'){
            const url = data.url || null;
            if(url) addMessage('assistant','Here is your audio:', model, mode, url);
            else addMessage('assistant','Audio generation failed.', model, mode);
        }
    } catch(err){
        console.error(err);
        addMessage('assistant','Error: '+err.message, model, mode);
    }
}
</script>
</body>
</html>
