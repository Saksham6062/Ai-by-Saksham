<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saksham Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --bg-dark:#1a1a2e;
  --bg-light:#f0f4f8;
  --card-dark:#16213e;
  --card-light:#ffffff;
  --text-dark:#e0e0e0;
  --text-light:#2c3e50;
  --secondary-dark:#a0a0c0;
  --secondary-light:#7f8c8d;
  --btn-bg:linear-gradient(45deg,#6a11cb,#2575fc);
  --btn-hover:linear-gradient(45deg,#5b0eaa,#1b5be0);
  --input-bg-dark:rgba(30,30,50,0.85);
  --input-bg-light:#f0f4f8;
}

body {
  font-family:'Poppins',sans-serif;
  background-color:var(--bg-dark);
  color:var(--text-dark);
  margin:0;
  padding:0;
  min-height:100vh;
  transition:0.3s all;
}

[data-theme="light"] body{
  background-color:var(--bg-light);
  color:var(--text-light);
}

header{
  position:fixed;
  top:0;
  width:100%;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 30px;
  backdrop-filter:blur(10px);
  z-index:100;
}

h1{
  font-size:2.8rem;
  font-weight:700;
  text-align:center;
  margin-top:100px;
  background:linear-gradient(45deg,#4285f4,#ea4335,#fbbc05,#34a853);
  background-size:400%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:colorShift 12s ease-in-out infinite;
}

@keyframes colorShift{
  0%,100%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
}

.subtitle{
  text-align:center;
  font-size:1.1rem;
  margin-bottom:30px;
  color:#aaa;
}

.container{max-width:1000px;margin:0 auto;padding:0 20px;}

.card{
  background-color:var(--card-dark);
  padding:20px;
  border-radius:15px;
  margin-bottom:20px;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
  transition:0.3s all;
}

[data-theme="light"] .card{
  background-color:var(--card-light);
  color:var(--text-light);
}

input,textarea,select{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.1);
  background-color:var(--input-bg-dark);
  color:var(--text-dark);
  font-size:1rem;
}

[data-theme="light"] input, [data-theme="light"] textarea, [data-theme="light"] select{
  background-color:var(--input-bg-light);
  color:var(--text-light);
}

button{
  padding:12px 20px;
  border-radius:50px;
  border:none;
  background:var(--btn-bg);
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:all 0.3s ease;
  margin-top:10px;
}

button:hover{
  background:var(--btn-hover);
  transform:scale(1.05);
}

.mode-tabs{display:flex;gap:10px;margin:10px 0;flex-wrap:wrap;}
.mode-tab{
  padding:10px 20px;
  border-radius:50px;
  cursor:pointer;
  background:rgba(255,255,255,0.2);
  font-weight:600;
  transition:0.2s;
}
.mode-tab.active{background:var(--btn-bg);color:#fff;}

#response{
  min-height:150px;
  margin-top:15px;
  padding:15px;
  border-radius:12px;
  background-color:var(--card-dark);
  white-space:pre-wrap;
  overflow:auto;
  box-shadow:0 8px 25px rgba(0,0,0,0.2);
}

[data-theme="light"] #response{
  background-color:var(--card-light);
  color:var(--text-light);
}

#canvaPreview{display:none;margin-top:20px;}
#previewFrame{width:100%;height:350px;border:1px solid rgba(0,0,0,0.1);border-radius:10px;margin-top:10px;}
#codeViewer{width:100%;max-height:350px;overflow:auto;background:#0b1020;color:#e6eef8;padding:10px;border-radius:10px;font-family:monospace;font-size:13px;}

[data-theme="light"] #codeViewer{background:#f4f4f4;color:#333;}

.theme-toggle{
  width:60px;
  height:30px;
  background:#ccc;
  border-radius:15px;
  position:relative;
  cursor:pointer;
}
.toggle-circle{
  width:26px;
  height:26px;
  background:#fff;
  border-radius:50%;
  position:absolute;
  top:2px;
  left:2px;
  display:flex;
  justify-content:center;
  align-items:center;
  transition:transform 0.3s;
}
[data-theme="light"] .toggle-circle{transform:translateX(30px);}
</style>
</head>
<body data-theme="dark">

<header>
<h2>Saksham Intelligence</h2>
<div class="theme-toggle" id="themeToggle">
  <div class="toggle-circle">🌙</div>
</div>
</header>

<div class="container">
<h1>Saksham Intelligence</h1>
<p class="subtitle">GPT (OpenAI)</p>

<div class="card">
<label>OpenAI API Key:</label>
<input type="password" id="apiKey" placeholder="Enter OpenAI API Key">

<label>Model:</label>
<select id="model">
  <option value="gpt-4o-mini">gpt-4o-mini</option>
  <option value="gpt-4.1-mini">gpt-4.1-mini</option>
</select>

<div class="mode-tabs">
  <div class="mode-tab active" data-mode="standard">Standard</div>
  <div class="mode-tab" data-mode="deepthink">DeepThink</div>
  <div class="mode-tab" data-mode="canva">Canva</div>
</div>

<label>Prompt:</label>
<textarea id="userPrompt" rows="4" placeholder="Type your prompt or code here..."></textarea>
<button id="generateBtn"><i class="fas fa-play"></i> Generate</button>
</div>

<div id="response" class="card">Your output will appear here.</div>

<div id="canvaPreview" class="card">
<h3>Live Preview</h3>
<iframe id="previewFrame"></iframe>
<h3>Extracted Code</h3>
<pre id="codeViewer"></pre>
</div>
</div>

<script>
const themeToggle = document.getElementById("themeToggle");
const body = document.body;
const toggleCircle = document.querySelector(".toggle-circle");

themeToggle.addEventListener("click",()=>{
  const current = body.getAttribute("data-theme");
  const next = current==="dark"?"light":"dark";
  body.setAttribute("data-theme",next);
  toggleCircle.textContent = next==="dark"?"🌙":"☀️";
});

// Mode tabs
let selectedMode='standard';
document.querySelectorAll(".mode-tab").forEach(tab=>{
  tab.addEventListener("click",()=>{
    document.querySelectorAll(".mode-tab").forEach(t=>t.classList.remove("active"));
    tab.classList.add("active");
    selectedMode=tab.dataset.mode;
    document.getElementById("canvaPreview").style.display=(selectedMode==="canva")?"block":"none";
    document.getElementById("response").style.display=(selectedMode!=="canva")?"block":"none";
  });
});

// OpenAI request
document.getElementById("generateBtn").addEventListener("click",async()=>{
  const apiKey=document.getElementById("apiKey").value.trim();
  const model=document.getElementById("model").value;
  const prompt=document.getElementById("userPrompt").value.trim();
  const responseEl=document.getElementById("response");
  const codeViewer=document.getElementById("codeViewer");
  const previewFrame=document.getElementById("previewFrame");

  if(!apiKey || !prompt){alert("API Key and prompt required");return;}

  responseEl.textContent="Generating...";
  codeViewer.textContent="";
  previewFrame.src="about:blank";

  let messages=[{role:"user", content: prompt}];
  if(selectedMode==="deepthink"){
    messages.unshift({role:"system", content:"Please provide concise numbered reasoning followed by a short conclusion."});
  }
  if(selectedMode==="canva"){
    messages.unshift({role:"system", content:"Generate code only, multiple files if needed for games/apps. Include HTML, CSS, JS, TS, PHP, Dart etc. Do not include explanations."});
  }

  try{
    const res=await fetch("https://api.openai.com/v1/chat/completions",{
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "Authorization":`Bearer ${apiKey}`
      },
      body:JSON.stringify({
        model:model,
        messages:messages,
        temperature:0.7,
        max_tokens:3000
      })
    });
    const data=await res.json();
    const text=data.choices?.[0]?.message?.content||"No response";

    if(selectedMode==="canva"){
      codeViewer.textContent=text;
      previewFrame.srcdoc=text;
    } else {
      responseEl.textContent=text;
    }
  }catch(err){responseEl.textContent="Error: "+err.message;}
});
</script>
</body>
</html>
